angular.module("ngMonitor",[]).provider("ngMonitor",function(){this.idle=20,this.warning=5,this.interval=1,this.timeout=5,this.events=["mousemove","keydown","DOMMouseScroll","mousewheel","mousedown","touchstart"],this.$get=function(a,b,c,d){var e=this,f=null,g=Math.trunc((new Date).getTime()/1e3);return $cookies.put("ngMonitorExpiryTime",parseInt(g)+parseInt(e.idle)),{check:function(){var b=d.get("ngMonitorExpiryTime"),c=Math.trunc((new Date).getTime()/1e3),f=parseInt(b)-parseInt(e.warning),g=parseInt(b)+parseInt(e.timeout);f==c&&a.$broadcast("warning"),b==c&&a.$broadcast("idle"),g==c&&a.$broadcast("timeout")},watchDom:function(){angular.element(b).on(e.events.join(" "),this.resetMonitor)},resetMonitor:function(){g=Math.trunc((new Date).getTime()/1e3),d.put("ngMonitorExpiryTime",parseInt(g)+parseInt(e.idle)),a.$broadcast("domTouched")},stop:function(){console.log("stop"),c.cancel(f)},start:function(){d.put("ngMonitorExpiryTime",parseInt(g)+parseInt(e.idle)),this.watchDom(),f=c(this.check,1e3*e.interval)}}}}).service("cookies",function(){this.put=function(a,b,c){var d=new Date;c=c||999999,d.setTime(d.getTime()+24*c*60*60*1e3),c="expires="+d.toUTCString(),document.cookie=a+"="+b+"; "+c},this.get=function(a){for(var a=a+"=",b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null}});
